<!DOCTYPE html>
<html>
<head>
    <title>模型类属性</title>
    <#include "/header.html">
</head>
<body style="background: transparent">
<script>
    // $(document).ready(function () {
    //
    // })
    // window.onload=function(){
    //     var a = document.getElementById("sifany-main");//获取div块对象
    //     // var a = document.getElementById("swan-main");//获取div块对象
    //     var Height=document.documentElement.clientHeight-150;//取得浏览器页面可视区域的宽度
    //     var Width=document.documentElement.clientWidth;//取得浏览器页面可视区域的宽度
    //     a.style.height=Height+"px";
    //     // a.style.left=Sgao2;
    // }
</script>

<div id="rrapp" v-cloak>
    <div v-show="showList" class="sifany-pm">
<table style="width: 100%;" class="sifany-pm">
    <tr>
        <td id="menu"  width="20%" style="vertical-align:top" ><!-- 选择父类-->

            <div id="classLayerMain" style="padding:10px;">
                <ul id="classTreeMain" class="ztree"></ul>
            </div>
        </td>
        <td width="80%"   class="sifany-pm">

            <div  class="layui-tab layui-tab-card" class="sifany-pm">
                <ul class="layui-tab-title">
                    <li class="layui-this"><span>指标</span></li>
                    <li ><span>组态</span></li>
                    <li ><span>采集配置</span></li>
                    <li ><span>计算配置</span></li>

                </ul>
                <div class="layui-tab-content sifany-pm" id="sifany-main">
                    <div class="layui-tab-item layui-show" class="sifany-pm">
                        <form >

                            <div class="div-inline">名称</div>
                            <div class="div-inline">
                                <input type="hidden"  v-model="sifanyClass.id"  readonly="readonly" />
                                <input type="text" class="input_data"  v-model="sifanyClass.name"   placeholder="名称"/>
                            </div>

                            <div class="div-inline">编码</div>
                            <div class="div-inline">
                                <input type="text" class="input_data"  v-model="sifanyClass.code"  placeholder="编码"/>
                            </div>
                            <div class="div-inline">图标</div>
                            <div class="div-inline" style="display: none">
                                <input type="text"  v-model="sifanyClass.icons"  @click="menuTree" placeholder="图标"/>
                            </div>
                            <div  class="div-inline">
                                <img style="height:50px;width:50px;"  @click="menuTree" v-bind:src="sifanyClass.irconurl">
                            </div>
                            <div class="div-inline">备注</div>
                            <div class="div-inline">
                                <input type="text" class="input_data"  v-model="sifanyClass.remark"  placeholder="备注"/>
                            </div>
                        </form>

                        <div class="grid-btn">
                            <#if shiro.hasPermission("sys:sifanyclassattr:save")>
                            <a class="btn btn-primary" @click="add"><i class="fa fa-plus"></i>&nbsp;新增</a>
                            </#if>
                            <#if shiro.hasPermission("sys:sifanyclassattr:update")>
                             <a class="btn btn-primary" @click="update"><i class="fa fa-pencil-square-o"></i>&nbsp;修改</a>
                             </#if>
                             <#if shiro.hasPermission("sys:sifanyclassattr:delete")>
                             <a class="btn btn-primary" @click="del"><i class="fa fa-trash-o"></i>&nbsp;删除</a>
                             </#if>
                              <#if shiro.hasPermission("sys:sifanyclassattr:save")>
                             <a class="btn btn-primary" @click="addclass"><i class="fa fa-plus"></i>&nbsp;保存</a>
                             </#if>
                        </div>

                        <table id="jqGrid" style="width: 90%"></table>
                        <div id="jqGridPager"></div>


                    </div>
                    <div class="layui-tab-item">
                    <!--<#if shiro.hasPermission("sys:sifanyclassattr:save")>-->
                    <!--<a class="btn btn-primary" @click="configmenu"><i class="fa fa-plus"></i>&nbsp;编辑</a>-->
                    <!--</#if>-->
                        <div>

                            <iframe src="${request.contextPath}/statics/gojs/samples/productionProcess.html"
                                    style="width: 100%;" id="config-swan-svg" height="400px"></iframe>
                        </div>

                    <div  style="display: none">
                        <input type="text"  v-model="sifanyClass.id"  placeholder="id"/>
                        <input type="text"  v-model="sifanyClass.modelId"  placeholder="图标"/>
                    </div>
                    <!--<div>-->
                        <!--<iframe src="${request.contextPath}/statics/gojs/samples/model_show.html"-->
                                <!--width="900px" id="config-swan-svg0" height="400px"></iframe>-->
                    <!--</div>-->
                    </div>
                    <div class="layui-tab-item">
                        <div style="float:left ;width:500px;">
                            <table id="jqGridgather"></table>
                            <div id="jqGridPagergather"></div>
                        </div>
                        <div style="float: right; ">
                            <form  >
                                <table class="param_update">
                                    <tr>
                                        <td>
                                            <div class="div-inline">名称</div>
                                            <div class="div-inline">
                                                <input type="hidden"  v-model="sifanyClassAttrGather.id"  readonly="readonly" />
                                                <input type="text"  v-model="sifanyClassAttrGather.name"  style="width:110px;height:26px;" readonly="readonly" placeholder="名称"/>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="div-inline">编码</div>
                                            <div class="div-inline">
                                                <input type="text"  v-model="sifanyClassAttrGather.code" style="width:110px;height:26px;" readonly="readonly" placeholder="编码"/>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <div class="div-inline">单位</div>
                                            <div class="div-inline" >

                                                <select  v-model="sifanyClassAttrGather.unitId" readonly="readonly" style="width:110px;height:26px;">
                                                    <option value="0">Kg</option>
                                                    <option value="1">N</option>
                                                    <option value="2">Pa</option>
                                                    <option value="3">KW</option>
                                                    <option value="4">KV</option>
                                                    <option value="5">V</option>
                                                    <option value="6">A</option>
                                                    <option value="7">KVA</option>
                                                </select>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="div-inline">类型</div>
                                            <div  class="div-inline">

                                                <select  v-model="sifanyClassAttrGather.attrstypeId" readonly="readonly" style="width:110px;height:26px;">
                                                    <option value="0">人为输入指标</option>
                                                    <option value="1">自动采集指标</option>
                                                    <option value="2">自动计算指标</option>
                                                </select>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td colspan="2">
                                            <div class="div-inline">备注</div>
                                            <div class="div-inline">
                                                <input type="text"  v-model="sifanyClassAttrGather.remark" readonly="readonly" placeholder="备注" style="width:160px;height:26px;"/>
                                            </div>
                                        </td>
                                    </tr>
                                </table>

                            </form>
                        </div>
                    </div>
                    <div class="layui-tab-item">
                        <table>
                            <tr>
                                <td>
                                    <table id="jqGridget"></table>
                                    <div id="jqGridPagerget"></div>
                                </td>
                                <td>
                                    <form  >
                                        <table class="param_update">
                                            <tr>
                                                <td>
                                                    <div class="div-inline">名称</div>
                                                    <div class="div-inline">
                                                        <input type="hidden"  v-model="sifanyClassAttr.id"  readonly="readonly" />
                                                        <input type="text"  v-model="sifanyClassAttr.name"  style="width:110px;height:26px;" readonly="readonly" placeholder="名称"/>
                                                    </div>
                                                </td>
                                                <td>
                                                    <div class="div-inline">编码</div>
                                                    <div class="div-inline">
                                                        <input type="text"  v-model="sifanyClassAttr.code" style="width:110px;height:26px;" readonly="readonly" placeholder="编码"/>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <div class="div-inline">单位</div>
                                                    <div class="div-inline" >

                                                        <select  v-model="sifanyClassAttr.unitId" readonly="readonly" style="width:110px;height:26px;">
                                                            <option value="0">Kg</option>
                                                            <option value="1">N</option>
                                                            <option value="2">Pa</option>
                                                            <option value="3">KW</option>
                                                            <option value="4">KV</option>
                                                            <option value="5">V</option>
                                                            <option value="6">A</option>
                                                            <option value="7">KVA</option>
                                                        </select>
                                                    </div>
                                                </td>
                                                <td>
                                                    <div class="div-inline">类型</div>
                                                    <div  class="div-inline">

                                                        <select  v-model="sifanyClassAttr.attrstypeId" readonly="readonly" style="width:110px;height:26px;">
                                                            <option value="0">输入类</option>
                                                            <option value="1">采集类</option>
                                                            <option value="2">计算类</option>
                                                        </select>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td colspan="2">
                                                    <div class="div-inline">备注</div>
                                                    <div class="div-inline">
                                                        <input type="text"  v-model="sifanyClassAttr.remark" readonly="readonly" placeholder="备注" style="width:160px;height:26px;"/>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td colspan="2">
                                                    <img style="height:250px;margin: 0 auto;" @click="editProject" src="../../statics/1234.png">
                                                </td>
                                            </tr>
                                        </table>

                                    </form>

                                </td>
                            </tr>
                        </table>
                        <!--<div style="float:left ;width:500px;">-->

                        <!--</div>-->
                        <!--<div style="margin-left:60%;">-->

                        <!--</div>-->
                    </div>
                </div>
            </div>



        </td>

        <!--<td width="500px" style="padding: 0;margin: 0;">


        </td>-->
    </tr>
</table>
</div>

<div v-show="!showList" class="panel panel-default" >

    <div class="panel-heading">{{title}}</div>
    <form class="form-horizontal">
        <div class="form-group">
            <div class="col-sm-2 control-label">设备</div>
            <div class="col-sm-10">
                <input type="text" class="form-control" class="input_data" style="cursor:pointer;" v-model="sifanyClassAttr.classId" @click="classTree" readonly="readonly" placeholder="所属类"/>
            </div>
        </div>
        <div class="form-group">
            <div class="col-sm-2 control-label">属性名</div>
            <div class="col-sm-10">
                <input type="text" class="form-control" class="input_data" class="input_data"  v-model="sifanyClassAttr.name" placeholder="属性名"/>
            </div>
        </div>
            <div class="form-group" style="display:none">
                <div class="col-sm-2 control-label">类型id</div>
                <div class="col-sm-10">
                    <input type="text" class="form-control" class="input_data" v-model="sifanyClassAttr.typeId" @click="typeTree" readonly="readonly" placeholder="属性类型"/>
                </div>
            </div>
                <div class="form-group">
                    <div class="col-sm-2 control-label">数据类型</div>
                    <div class="col-sm-10">
                        <select class="form-control" v-model="sifanyClassAttr.dataType">
                            <option value="">&#45;&#45;请选择&#45;&#45;</option>
                            <option value="1">int</option>
                            <option value="2">double</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-sm-2 control-label">单位</div>
                    <div class="col-sm-10">
                        <select class="form-control" v-model="sifanyClassAttr.unitId">
                            <option value="0">Kg</option>
                            <option value="1">N</option>
                            <option value="2">Pa</option>
                            <option value="3">KW</option>
                            <option value="4">KV</option>
                            <option value="5">V</option>
                            <option value="6">A</option>
                            <option value="7">KVA</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-sm-2 control-label">指标种类</div>
                    <div class="col-sm-10">
                        <select class="form-control" v-model="sifanyClassAttr.attrstypeId">
                            <option value="0">输入类</option>
                            <option value="1">采集类</option>
                            <option value="2">计算类</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-sm-2 control-label"></div>
                    <input type="button" class="btn btn-primary" id="btnSaveOrUpdate" data-loading-text="保存中..." @click="saveOrUpdate" value="确定"/>
                    &nbsp;&nbsp;<input type="button" class="btn btn-warning" id="cancel"  @click="reload" value="返回"/>
                </div>
                <div class="form-group"></div>
    </form>

</div>

</div>


<div class="dropdown open" id="treeContextMenu" style="display: none;position: absolute">
    <ul class="dropdown-menu">

        <li><a href="javascript:;" @click="addHoverDom" id="toUpdateBtn">增加子节点</a></li>
        <li><a href="javascript:;" @click="deleteDom" id="deleteBtn" data-target="#confirmDialog" data-toggle="modal">删除</a></li>
        <li><a href="#" id="swan-cancel" >取消</a></li>
    </ul>
</div>

<!-- 选择所属类-->
<div id="classLayer" style="display: none;padding:10px;">
    <ul id="classTree" class="ztree"></ul>
</div>
<!-- 选择父类-->
<div id="classLayerDev" style="display: none;padding:10px;">
    <ul id="classTreeDev" class="ztree"></ul>
</div>
<!-- 选择属性-->
<div id="typeLayer" style="display: none;padding:10px;">
    <ul id="typeTree" class="ztree1"></ul>
</div>
<div id="menuLayer" style="display: none;padding:10px;">

    <iframe src="${request.contextPath}/statics/svgedit-5.0.0/editor/svg-editor.html?extensions="
            width="1000px" id="swan-svg" height="1000px"></iframe>
</div>
<div id="menumapLayer" style="display: none;padding:10px;">

    <iframe src="${request.contextPath}/statics/gojs/samples/productionProcess.html"
            width="1000px" id="config-swan-svg" height="800px"></iframe>
</div>

<div id="editProject" style="display: none;padding:10px;">

    <iframe src="http://10.0.0.99:8089/#/home/project_iframe"
            width="1000px" id="editProject-info" height="800px"></iframe>
</div>

<script src="${request.contextPath}/statics/js/modules/sys/modelalgorithms.js?_${.now?long}"></script>
<script src="${request.contextPath}/statics/plugins/layui/lay/dest/layui.all.js"></script>
<link rel="stylesheet" href="${request.contextPath}/statics/plugins/layui/css/layui.css">
<link rel="stylesheet" href="${request.contextPath}/statics/css/modelbusiness.css">
<style>
    html,body{height:100%;}
    #rrapp{height:99%; }
    .sifany-pm{
        height:100%;
    }
</style>
</body>
</html>
